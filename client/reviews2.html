<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="Hanzi SRS — Premium Review Experience" />
  <meta name="theme-color" content="#0a0e17" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <title>Reviews | Hanzi SRS</title>

  <style>
    /* ---------- Reset & Premium Tokens ---------- */
    *,*::before,*::after{box-sizing:border-box}
    body,h1,h2,h3,h4,p,figure,blockquote,dl,dd{margin:0}
    img,svg,video,canvas{display:block;max-width:100%}
    input,button,textarea,select{font:inherit}
    :root{color-scheme:dark light}
    :root{
      /* Premium dark theme */
      --bg:#0a0e17; --bg-2:#0e1321; --text:#f0f2f5; --muted:#94a3b8;
      --surface:rgba(255,255,255,.05); --surface-2:rgba(255,255,255,.08); --border:rgba(255,255,255,.15);
      --accent:hsl(257 90% 66%); --accent-2:hsl(190 90% 60%); --success:#10b981; --warn:#f59e0b; --danger:#ef4444;
      --shadow:0 20px 40px rgba(0,0,0,.4), 0 4px 12px rgba(0,0,0,.25);
      --glow:0 0 40px color-mix(in oklab, var(--accent), transparent 80%);

      --container:1200px; --radius:20px; --gap:24px;
      --navH:72px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#ffffff; --bg-2:#f8fafc; --text:#0f172a; --muted:#64748b;
        --surface:#ffffff; --surface-2:#f1f5f9; --border:#e2e8f0;
        --shadow:0 20px 40px rgba(2,6,23,.08), 0 4px 12px rgba(2,6,23,.04);
      }
    }
    html[data-theme="light"]{
      --bg:#ffffff; --bg-2:#f8fafc; --text:#0f172a; --muted:#64748b;
      --surface:#ffffff; --surface-2:#f1f5f9; --border:#e2e8f0;
      --shadow:0 20px 40px rgba(2,6,23,.08), 0 4px 12px rgba(2,6,23,.04);
    }
    html[data-theme="dark"]{
      --bg:#0a0e17; --bg-2:#0e1321; --text:#f0f2f5; --muted:#94a3b8;
      --surface:rgba(255,255,255,.05); --surface-2:rgba(255,255,255,.08); --border:rgba(255,255,255,.15);
    }

    body{
      min-height:100vh; background:var(--bg); color:var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility; line-height:1.6;
    }

    /* ---------- Premium Background ---------- */
    .bg-wrap{position:fixed; inset:0; z-index:-1; overflow:hidden;
      background:
        radial-gradient(1400px 600px at 90% -5%, color-mix(in oklab, var(--accent), transparent 65%), transparent 80%),
        radial-gradient(1100px 450px at 5% 10%, color-mix(in oklab, var(--accent-2), transparent 70%), transparent 80%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 40%, var(--bg) 100%);
    }
    .bg-grid{position:absolute; inset:-1px;
      background:
        linear-gradient(transparent 97%, var(--border) 100%) 0 0 / 60px 60px,
        linear-gradient(90deg, transparent 97%, var(--border) 100%) 0 0 / 60px 60px;
      mask-image: radial-gradient(90% 70% at 50% 10%, #000 0%, #000 60%, transparent 90%); opacity:.15;
    }

    .container{max-width:var(--container); margin-inline:auto; padding-inline: clamp(20px, 4vw, 40px)}
    .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .stack{display:flex; flex-direction:column; gap:12px}
    .grid{display:grid; gap:var(--gap)}

    /* ---------- Premium Navigation ---------- */
    .nav{position:sticky; top:0; z-index:100; backdrop-filter: blur(20px);
      background: color-mix(in oklab, var(--bg), transparent 70%); border-bottom:1px solid var(--border)}
    .nav-inner{height:var(--navH); display:flex; align-items:center; justify-content:space-between}
    .brand{display:flex; gap:12px; align-items:center; color:inherit; text-decoration:none; font-weight:800}
    .brand-badge{width:36px; height:36px; display:grid; place-items:center; border-radius:12px; color:#fff;
      background:linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow:var(--shadow)}

    /* ---------- Premium Buttons with Refined Micro-interactions ---------- */
    .btn{
      display:inline-flex; align-items:center; gap:10px; border:1px solid var(--border); background:var(--surface);
      padding:12px 18px; border-radius:14px; color:var(--text); text-decoration:none; cursor:pointer;
      font-weight:600; transition: all 0.2s cubic-bezier(0.33, 1, 0.68, 1);
      position: relative;
      overflow: hidden;
    }
    .btn:hover {
      border-color: color-mix(in oklab, var(--border), transparent 30%);
      background: var(--surface-2);
      transform: translateY(-1px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    .btn:active {
      transform: translateY(0);
      transition: transform 0.1s ease;
    }
    .btn.primary{
      color:#fff; border:none; background:linear-gradient(135deg, var(--accent), var(--accent-2)); 
      box-shadow:var(--shadow), var(--glow);
    }
    .btn.primary:hover {
      filter: brightness(1.08) saturate(1.1);
      box-shadow: 0 10px 30px color-mix(in oklab, var(--accent), transparent 70%), 0 4px 12px rgba(0,0,0,0.1);
    }
    .btn.icon{width:48px; height:48px; display:grid; place-items:center; padding:0}
    .pill{padding:8px 14px; border:1px solid var(--border); border-radius:999px; font-size:0.9rem}
    .muted{color:var(--muted)}

    /* ---------- Premium Header ---------- */
    .header{margin:24px 0 16px}
    .header-content{
      background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); 
      padding:20px 24px; box-shadow:var(--shadow); 
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      position: relative;
    }
    .session-title{font-size:1.5rem; font-weight:800; display:flex; align-items:center; gap:12px}

    /* Centered Progress Section */
    .progress-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      justify-self: center;
      width: 100%;
      max-width: 400px;
    }
    .progress-container{display:flex; align-items:center; gap:16px; width: 100%}
    .progress-bar{flex:1; height:8px; background:var(--surface-2); border-radius:999px; overflow:hidden}
    .progress-fill{height:100%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); border-radius:999px; transition:width 0.5s ease}
    .stats{display:flex; gap:20px; justify-self: end;}
    .stat{display:flex; flex-direction:column; gap:4px; text-align:center}
    .stat-value{font-weight:800; font-size:1.1rem}
    .stat-label{font-size:0.85rem; color:var(--muted)}

    /* ---------- Premium Review Card ---------- */
    .review-card{
      background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); 
      padding:32px; box-shadow:var(--shadow); margin-bottom:24px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .review-card:hover {
      box-shadow: 0 25px 50px rgba(0,0,0,0.25), 0 8px 16px rgba(0,0,0,0.2);
    }
    .card-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:24px}
    .item-badge{
      display:inline-flex; align-items:center; gap:8px; padding:8px 16px; border-radius:999px; 
      font-weight:700; font-size:0.9rem; transition: all 0.3s ease;
    }
    .item-badge.radical{background:linear-gradient(135deg, #8b5cf6, #a855f7); color:white}
    .item-badge.kanji{background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:white}
    .item-badge.vocabulary{background:linear-gradient(135deg, #10b981, #059669); color:white}
    .item-meta{display:flex; gap:12px}
    .meta-item{display:flex; align-items:center; gap:6px; font-size:0.9rem; color:var(--muted); transition: color 0.3s ease}
    .meta-item:hover {color: var(--text);}

    /* Character Display */
    .character-display{text-align:center; margin:32px 0; position: relative;}
    .character{
      font-size: clamp(120px, 20vw, 200px); font-weight:900; line-height:1; 
      text-shadow: 0 10px 30px rgba(0,0,0,0.3);
      margin-bottom:16px;
      transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .character-subtitle{font-size:1.2rem; color:var(--muted); margin-top:12px; transition: color 0.3s ease}
    .character-subtitle:hover {color: var(--text);}

    /* Question & Input */
    .question-section{margin:32px 0; text-align:center}
    .question{font-size:1.4rem; font-weight:700; margin-bottom:16px}
    .question-hint{color:var(--muted); font-size:1rem; margin-top:8px; transition: color 0.3s ease}
    .question-hint:hover {color: var(--text);}

    .input-container{
      display:flex; gap:16px; max-width:500px; margin:0 auto 24px;
      transition: all 0.3s ease;
    }
    .answer-input{
      flex:1; padding:16px 20px; border:2px solid var(--border); border-radius:16px; 
      background:var(--bg-2); color:var(--text); font-size:1.1rem; transition:all 0.3s ease;
    }
    .answer-input:focus{
      outline:none; border-color:var(--accent); 
      box-shadow:0 0 0 3px color-mix(in oklab, var(--accent), transparent 80%);
      transform: translateY(-2px);
    }
    .answer-input.correct{
      border-color:var(--success); 
      box-shadow:0 0 0 3px color-mix(in oklab, var(--success), transparent 80%);
    }
    .answer-input.incorrect{
      border-color:var(--danger); 
      box-shadow:0 0 0 3px color-mix(in oklab, var(--danger), transparent 80%);
    }

    /* Result Display */
    .result-container{
      padding:20px; border-radius:16px; margin-top:24px; display:none;
      background:var(--surface-2); border:1px solid var(--border);
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .result-container.show{
      display:block;
      animation: slideInUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .result-container.correct{border-color:color-mix(in oklab, var(--success), transparent 60%)}
    .result-container.incorrect{border-color:color-mix(in oklab, var(--danger), transparent 60%)}
    .result-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:12px}
    .result-title{font-weight:800; font-size:1.2rem; transition: all 0.3s ease}
    .result-title.correct{color:var(--success)}
    .result-title.incorrect{color:var(--danger)}
    .result-details{color:var(--muted); transition: color 0.3s ease}
    .result-details:hover {color: var(--text);}
    .result-actions{display:flex; gap:12px; margin-top:16px}

    /* Controls */
    .controls{display:flex; justify-content:space-between; align-items:center; margin-top:32px}
    .control-group{display:flex; gap:12px}
    .shortcut-hint{display:flex; gap:8px; align-items:center; color:var(--muted); font-size:0.9rem}
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; 
      font-size:0.8rem; border:1px solid var(--border); padding:4px 8px; 
      border-radius:6px; background:var(--surface-2);
      transition: all 0.2s ease;
    }
    .kbd:hover {
      background: var(--surface);
      transform: translateY(-1px);
    }

    /* ---------- Context Panel ---------- */
    .context-panel{
      background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); 
      padding:24px; box-shadow:var(--shadow); margin-top:24px;
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .panel-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:20px}
    .panel-title{font-size:1.2rem; font-weight:700}
    .panel-tabs{display:flex; gap:8px; border-bottom:1px solid var(--border); padding-bottom:16px; margin-bottom:20px}
    .panel-tab{
      padding:10px 16px; border-radius:10px; border:1px solid transparent; cursor:pointer; 
      font-weight:600; transition:all 0.3s ease;
    }
    .panel-tab:hover {
      background: var(--surface-2);
      border-color: var(--border);
    }
    .panel-tab.active{
      background:var(--surface-2); border-color:var(--border);
      transform: translateY(-2px);
    }
    .panel-content{display:none; transition: all 0.3s ease;}
    .panel-content.active{
      display:block;
      animation: fadeIn 0.4s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Examples */
    .example-list{display:grid; gap:16px}
    .example{
      padding:16px; border:1px solid var(--border); border-radius:12px; 
      background:var(--bg-2); transition:all 0.3s ease;
    }
    .example:hover{
      transform:translateY(-3px); 
      box-shadow:0 10px 25px rgba(0,0,0,0.1);
      border-color: color-mix(in oklab, var(--border), transparent 40%);
    }
    .example-hanzi{font-size:1.2rem; font-weight:700; margin-bottom:8px}
    .example-pinyin{color:var(--muted); margin-bottom:8px; transition: color 0.3s ease}
    .example-pinyin:hover {color: var(--text);}
    .example-translation{color:var(--text)}

    /* Mnemonics */
    .mnemonic-section{margin-bottom:24px; transition: all 0.3s ease;}
    .mnemonic-section:hover {
      transform: translateX(5px);
    }
    .mnemonic-title{font-weight:700; margin-bottom:12px; display:flex; align-items:center; gap:8px}
    .mnemonic-content{color:var(--muted); line-height:1.6; transition: color 0.3s ease}
    .mnemonic-content:hover {color: var(--text);}

    /* Stroke Order */
    .stroke-container{display:grid; grid-template-columns:repeat(auto-fit, minmax(80px, 1fr)); gap:12px; margin-top:16px}
    .stroke-box{
      aspect-ratio:1; display:grid; place-items:center; background:var(--surface-2); 
      border-radius:12px; border:1px solid var(--border); font-weight:700; position:relative;
      transition: all 0.3s ease;
    }
    .stroke-box:hover {
      transform: scale(1.05);
      border-color: var(--accent);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .stroke-number{
      position:absolute; top:6px; left:6px; font-size:0.8rem; color:var(--muted);
    }

    /* ---------- Premium Footer ---------- */
    footer{
      border-top:1px solid var(--border); margin-top:40px; padding:32px 0; 
      color:var(--muted); text-align:center;
    }

    /* ---------- Animations ---------- */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .fade-in { animation: fadeIn 0.3s ease; }
    .pulse { animation: pulse 0.5s ease; }
    .shake { animation: shake 0.3s ease; }

    /* ---------- Responsive Design ---------- */
    @media (max-width: 768px) {
      .header-content{
        grid-template-columns: 1fr;
        gap: 16px;
      }
      .progress-section {
        order: 2;
      }
      .stats {
        order: 3;
        justify-self: center;
      }
      .progress-container{max-width:100%}
      .stats{width:100%; justify-content:space-between}
      .input-container{flex-direction:column}
      .controls{flex-direction:column; gap:16px; align-items:flex-start}
      .control-group{width:100%; justify-content:space-between}
    }
  </style>
</head>
<body>
  <div class="bg-wrap" aria-hidden="true"><div class="bg-grid"></div></div>

  <!-- Premium Navigation -->
  <nav class="nav" aria-label="Primary">
    <div class="container nav-inner">
      <a class="brand" href="index.html" aria-label="Back to dashboard">
        <span class="brand-badge" aria-hidden="true">汉</span>
        <span>Hanzi SRS</span>
        <span class="pill">Reviews</span>
      </a>
      <div class="row">
        <a class="btn" href="index.html">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>
          </svg>
          Dashboard
        </a>
        <a class="btn" href="lessons.html">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/>
          </svg>
          Lessons
        </a>
        <button id="themeBtn" class="btn icon" aria-label="Toggle theme">
          <svg id="themeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M12 3v2m0 14v2m9-9h-2M5 12H3m14.95 6.95-1.41-1.41M7.46 7.46 6.05 6.05m12.9 0-1.41 1.41M7.46 16.54l-1.41 1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Premium Header -->
  <header class="container header">
    <div class="header-content">
      <div class="session-title">
        <span>Review Session</span>
        <span class="pill">Active</span>
      </div>

      <!-- Centered Progress Section -->
      <div class="progress-section">
        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 30%"></div>
          </div>
          <span class="muted" id="progressText">3/10</span>
        </div>
      </div>

      <div class="stats">
        <div class="stat">
          <span class="stat-value" id="accuracy">94%</span>
          <span class="stat-label">Accuracy</span>
        </div>
        <div class="stat">
          <span class="stat-value" id="streak">12</span>
          <span class="stat-label">Day Streak</span>
        </div>
        <div class="stat">
          <span class="stat-value" id="time">02:15</span>
          <span class="stat-label">Time</span>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Premium Review Card -->
    <section class="review-card fade-in" id="reviewCard">
      <div class="card-header">
        <div class="row">
          <span class="item-badge kanji" id="itemType">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            Kanji
          </span>
          <div class="item-meta">
            <span class="meta-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
              </svg>
              Level 3
            </span>
            <span class="meta-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
              </svg>
              Apprentice 2
            </span>
          </div>
        </div>
        <div class="row">
          <button id="audioBtn" class="btn icon" title="Play audio">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 5 6 9H2v6h4l5 4V5z"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
            </svg>
          </button>
          <button id="starBtn" class="btn icon" title="Star item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m12 3 3.09 6.26L22 10.27l-5 4.9 1.18 6.86L12 18.9 5.82 22 7 15.17l-5-4.9 6.91-1.01L12 3Z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Character Display -->
      <div class="character-display">
        <div class="character" id="character">学</div>
        <div class="character-subtitle" id="characterSubtitle">Type the pinyin with tone marks</div>
      </div>

      <!-- Question & Input -->
      <div class="question-section">
        <div class="question" id="question">What is the reading of this character?</div>
        <div class="question-hint" id="questionHint">Press Enter to submit your answer</div>

        <div class="input-container">
          <input type="text" class="answer-input" id="answerInput" placeholder="Type your answer..." autocomplete="off">
          <button class="btn primary" id="submitBtn">Submit</button>
        </div>
      </div>

      <!-- Result Display -->
      <div class="result-container" id="resultContainer">
        <div class="result-header">
          <div class="result-title correct" id="resultTitle">Correct!</div>
          <button class="btn" id="nextBtn">Next</button>
        </div>
        <div class="result-details" id="resultDetails">
          The reading is <strong>xué</strong>. Well done!
        </div>
        <div class="result-actions">
          <button class="btn" id="showContextBtn">Show Context</button>
          <button class="btn" id="showMnemonicsBtn">Show Mnemonics</button>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls">
        <div class="control-group">
          <button class="btn" id="hintBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            Hint
          </button>
        </div>
        <div class="shortcut-hint">
          <span>Shortcuts:</span>
          <span class="kbd">Enter</span>
          <span class="kbd">H</span>
          <span class="kbd">A</span>
        </div>
      </div>
    </section>

    <!-- Context Panel -->
    <section class="context-panel" id="contextPanel" style="display: none;">
      <div class="panel-header">
        <div class="panel-title">Learning Resources</div>
        <button class="btn icon" id="closeContextBtn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>

      <div class="panel-tabs">
        <div class="panel-tab active" data-tab="examples">Examples</div>
        <div class="panel-tab" data-tab="mnemonics">Mnemonics</div>
        <div class="panel-tab" data-tab="strokes">Stroke Order</div>
        <div class="panel-tab" data-tab="details">Details</div>
      </div>

      <!-- Examples Tab -->
      <div class="panel-content active" id="examplesTab">
        <div class="example-list">
          <div class="example">
            <div class="example-hanzi">我在学校学习中文。</div>
            <div class="example-pinyin">Wǒ zài xuéxiào xuéxí zhōngwén.</div>
            <div class="example-translation">I study Chinese at school.</div>
          </div>
          <div class="example">
            <div class="example-hanzi">学习需要耐心。</div>
            <div class="example-pinyin">Xuéxí xūyào nàixīn.</div>
            <div class="example-translation">Learning requires patience.</div>
          </div>
          <div class="example">
            <div class="example-hanzi">他学得很快。</div>
            <div class="example-pinyin">Tā xué dé hěn kuài.</div>
            <div class="example-translation">He learns very quickly.</div>
          </div>
        </div>
      </div>

      <!-- Mnemonics Tab -->
      <div class="panel-content" id="mnemonicsTab">
        <div class="mnemonic-section">
          <div class="mnemonic-title">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>
            </svg>
            Meaning Mnemonic
          </div>
          <div class="mnemonic-content">
            Under a roof (冖) the child (子) is learning — imagine a classroom where the roof keeps the noise out so the child can focus. That's why 学 means to learn.
          </div>
        </div>
        <div class="mnemonic-section">
          <div class="mnemonic-title">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 1v22M5 10v4a7 7 0 0 0 14 0v-4a7 7 0 0 0-14 0z"/>
            </svg>
            Reading Mnemonic
          </div>
          <div class="mnemonic-content">
            Picture your favorite teacher shouting "SH-UEY!" (xué) as you master something new. The cheer locks the reading in.
          </div>
        </div>
      </div>

      <!-- Stroke Order Tab -->
      <div class="panel-content" id="strokesTab">
        <div class="stroke-container">
          <div class="stroke-box"><span class="stroke-number">1</span>丶</div>
          <div class="stroke-box"><span class="stroke-number">2</span>丶</div>
          <div class="stroke-box"><span class="stroke-number">3</span>丿</div>
          <div class="stroke-box"><span class="stroke-number">4</span>丶</div>
          <div class="stroke-box"><span class="stroke-number">5</span>𠃍</div>
          <div class="stroke-box"><span class="stroke-number">6</span>一</div>
          <div class="stroke-box"><span class="stroke-number">7</span>亅</div>
          <div class="stroke-box"><span class="stroke-number">8</span>一</div>
        </div>
        <div class="row" style="margin-top: 20px; justify-content: center;">
          <button class="btn" id="animateStrokesBtn">Animate</button>
          <button class="btn" id="practiceWritingBtn">Practice Writing</button>
        </div>
      </div>

      <!-- Details Tab -->
      <div class="panel-content" id="detailsTab">
        <div class="stack">
          <div class="row">
            <span class="muted">Character:</span>
            <span><strong>学</strong> (simplified)</span>
          </div>
          <div class="row">
            <span class="muted">Reading:</span>
            <span><strong>xué</strong></span>
          </div>
          <div class="row">
            <span class="muted">Meaning:</span>
            <span><strong>learn; study</strong></span>
          </div>
          <div class="row">
            <span class="muted">Radicals:</span>
            <span>冖 (cover) + 子 (child)</span>
          </div>
          <div class="row">
            <span class="muted">Components:</span>
            <span>冖 + 子 → 学</span>
          </div>
          <div class="row">
            <span class="muted">Level:</span>
            <span>3 (HSK 1)</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="container">
    <div class="muted">© 2023 Hanzi SRS · Master Chinese characters through spaced repetition</div>
  </footer>

  <script>
    // ========== STATE MANAGEMENT ==========
    const state = {
      currentItem: null,
      session: {
        total: 10,
        completed: 3,
        correct: 3,
        startTime: Date.now()
      },
      settings: {
        autoPlayAudio: true,
        showContextAfterWrong: false,
        requireTones: true
      }
    };

    // ========== DEMO DATA ==========
    const reviewItems = [
      {
        id: 1,
        type: 'kanji',
        character: '学',
        reading: 'xué',
        meaning: 'learn; study',
        level: 3,
        srsStage: 'Apprentice 2',
        examples: [
          { hanzi: '我在学校学习中文。', pinyin: 'Wǒ zài xuéxiào xuéxí zhōngwén.', translation: 'I study Chinese at school.' },
          { hanzi: '学习需要耐心。', pinyin: 'Xuéxí xūyào nàixīn.', translation: 'Learning requires patience.' },
          { hanzi: '他学得很快。', pinyin: 'Tā xué dé hěn kuài.', translation: 'He learns very quickly.' }
        ],
        meaningMnemonic: 'Under a roof (冖) the child (子) is learning — imagine a classroom where the roof keeps the noise out so the child can focus. That\'s why 学 means to learn.',
        readingMnemonic: 'Picture your favorite teacher shouting "SH-UEY!" (xué) as you master something new. The cheer locks the reading in.',
        strokes: 8
      },
      {
        id: 2,
        type: 'radical',
        character: '冖',
        reading: null,
        meaning: 'cover',
        level: 1,
        srsStage: 'Guru 1',
        examples: [
          { hanzi: '这个部首出现在很多汉字中。', pinyin: 'Zhège bùshǒu chūxiàn zài hěnduō hànzì zhōng.', translation: 'This radical appears in many Chinese characters.' }
        ],
        meaningMnemonic: 'It looks like a roof covering something.',
        readingMnemonic: null,
        strokes: 2
      },
      {
        id: 3,
        type: 'vocabulary',
        character: '学习',
        reading: 'xuéxí',
        meaning: 'to study; learning',
        level: 3,
        srsStage: 'Apprentice 3',
        examples: [
          { hanzi: '我喜欢学习新语言。', pinyin: 'Wǒ xǐhuān xuéxí xīn yǔyán.', translation: 'I like learning new languages.' },
          { hanzi: '他每天学习八小时。', pinyin: 'Tā měitiān xuéxí bā xiǎoshí.', translation: 'He studies eight hours every day.' }
        ],
        meaningMnemonic: '学 means learn and 习 means practice, so together they mean the process of learning.',
        readingMnemonic: 'It uses the same reading as 学 (xué) with an added 习 (xí).',
        strokes: null
      }
    ];

    // ========== DOM ELEMENTS ==========
    const elements = {
      // Progress
      progressFill: document.getElementById('progressFill'),
      progressText: document.getElementById('progressText'),
      accuracy: document.getElementById('accuracy'),
      streak: document.getElementById('streak'),
      time: document.getElementById('time'),

      // Review card
      itemType: document.getElementById('itemType'),
      character: document.getElementById('character'),
      characterSubtitle: document.getElementById('characterSubtitle'),
      question: document.getElementById('question'),
      questionHint: document.getElementById('questionHint'),
      answerInput: document.getElementById('answerInput'),
      submitBtn: document.getElementById('submitBtn'),

      // Result
      resultContainer: document.getElementById('resultContainer'),
      resultTitle: document.getElementById('resultTitle'),
      resultDetails: document.getElementById('resultDetails'),
      nextBtn: document.getElementById('nextBtn'),
      showContextBtn: document.getElementById('showContextBtn'),
      showMnemonicsBtn: document.getElementById('showMnemonicsBtn'),

      // Controls
      hintBtn: document.getElementById('hintBtn'),
      audioBtn: document.getElementById('audioBtn'),
      starBtn: document.getElementById('starBtn'),

      // Context panel
      contextPanel: document.getElementById('contextPanel'),
      closeContextBtn: document.getElementById('closeContextBtn'),
      panelTabs: document.querySelectorAll('.panel-tab'),
      panelContents: document.querySelectorAll('.panel-content'),

      // Theme
      themeBtn: document.getElementById('themeBtn'),
      themeIcon: document.getElementById('themeIcon')
    };

    // ========== INITIALIZATION ==========
    function init() {
      loadCurrentItem();
      setupEventListeners();
      updateProgress();
      startTimer();

      // Set current year in footer
      document.querySelector('footer .muted').textContent = `© ${new Date().getFullYear()} Hanzi SRS · Master Chinese characters through spaced repetition`;
    }

    function loadCurrentItem() {
      state.currentItem = reviewItems[0];
      renderItem();
    }

    function renderItem() {
      const item = state.currentItem;

      // Update item type badge
      elements.itemType.className = `item-badge ${item.type}`;
      elements.itemType.innerHTML = `
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          ${getTypeIcon(item.type)}
        </svg>
        ${capitalizeFirst(item.type)}
      `;

      // Update character and question
      elements.character.textContent = item.character;

      if (item.type === 'radical') {
        elements.question.textContent = 'What is the meaning of this radical?';
        elements.characterSubtitle.textContent = 'Type the meaning in English';
        elements.answerInput.placeholder = 'Type the meaning...';
      } else {
        elements.question.textContent = 'What is the reading of this character?';
        elements.characterSubtitle.textContent = 'Type the pinyin with tone marks';
        elements.answerInput.placeholder = 'Type pinyin...';
      }

      // Reset UI state
      elements.answerInput.value = '';
      elements.answerInput.className = 'answer-input';
      elements.resultContainer.style.display = 'none';
      elements.contextPanel.style.display = 'none';

      // Focus input
      elements.answerInput.focus();
    }

    function getTypeIcon(type) {
      switch(type) {
        case 'radical':
          return '<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>';
        case 'kanji':
          return '<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>';
        case 'vocabulary':
          return '<path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/>';
        default:
          return '<circle cx="12" cy="12" r="10"/>';
      }
    }

    function capitalizeFirst(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }

    // ========== PROGRESS & TIMER ==========
    function updateProgress() {
      const progress = (state.session.completed / state.session.total) * 100;
      elements.progressFill.style.width = `${progress}%`;
      elements.progressText.textContent = `${state.session.completed}/${state.session.total}`;

      const accuracy = state.session.correct / state.session.completed * 100;
      elements.accuracy.textContent = `${isNaN(accuracy) ? 0 : Math.round(accuracy)}%`;
    }

    function startTimer() {
      setInterval(() => {
        const elapsed = Math.floor((Date.now() - state.session.startTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        elements.time.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      }, 1000);
    }

    // ========== ANSWER CHECKING ==========
    function checkAnswer() {
      const userAnswer = elements.answerInput.value.trim();
      const item = state.currentItem;
      let isCorrect = false;

      if (item.type === 'radical') {
        // Check meaning for radicals
        isCorrect = userAnswer.toLowerCase() === item.meaning.toLowerCase();
      } else {
        // Check reading for kanji and vocabulary
        // Simple check - in a real app, you'd use proper pinyin validation
        isCorrect = userAnswer.toLowerCase() === item.reading.toLowerCase();
      }

      showResult(isCorrect);

      // Update session stats
      state.session.completed++;
      if (isCorrect) state.session.correct++;
      updateProgress();
    }

    function showResult(isCorrect) {
      const item = state.currentItem;

      // Update result display
      elements.resultTitle.textContent = isCorrect ? 'Correct!' : 'Incorrect';
      elements.resultTitle.className = `result-title ${isCorrect ? 'correct' : 'incorrect'}`;

      if (isCorrect) {
        elements.resultDetails.innerHTML = `The ${item.type === 'radical' ? 'meaning' : 'reading'} is <strong>${item.type === 'radical' ? item.meaning : item.reading}</strong>. Well done!`;
        elements.answerInput.className = 'answer-input correct';
      } else {
        elements.resultDetails.innerHTML = `The correct ${item.type === 'radical' ? 'meaning' : 'reading'} is <strong>${item.type === 'radical' ? item.meaning : item.reading}</strong>. Try again next time!`;
        elements.answerInput.className = 'answer-input incorrect';
      }

      // Show result container
      elements.resultContainer.className = `result-container show ${isCorrect ? 'correct' : 'incorrect'}`;
      elements.resultContainer.style.display = 'block';

      // Pulse animation for correct answers
      if (isCorrect) {
        elements.character.classList.add('pulse');
        setTimeout(() => elements.character.classList.remove('pulse'), 500);
      } else {
        elements.answerInput.classList.add('shake');
        setTimeout(() => elements.answerInput.classList.remove('shake'), 300);
      }
    }

    function nextItem() {
      // In a real app, you'd get the next item from the queue
      // For this demo, we'll just reload the same item
      loadCurrentItem();
    }

    // ========== CONTEXT PANEL ==========
    function showContextPanel() {
      elements.contextPanel.style.display = 'block';
      activateTab('examples');
    }

    function hideContextPanel() {
      elements.contextPanel.style.display = 'none';
    }

    function activateTab(tabName) {
      // Update tabs
      elements.panelTabs.forEach(tab => {
        tab.classList.toggle('active', tab.dataset.tab === tabName);
      });

      // Update content
      elements.panelContents.forEach(content => {
        content.classList.toggle('active', content.id === `${tabName}Tab`);
      });
    }

    // ========== AUDIO ==========
    function playAudio() {
      const item = state.currentItem;
      const text = item.type === 'radical' ? item.meaning : item.reading;

      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'zh-CN';
        speechSynthesis.speak(utterance);
      } else {
        alert('Text-to-speech is not supported in your browser');
      }
    }

    // ========== THEME TOGGLE ==========
    function initTheme() {
      const THEME_KEY = 'hanziSRS_theme';
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

      function applyTheme(next) {
        localStorage.setItem(THEME_KEY, next);
        document.documentElement.setAttribute('data-theme', next === 'auto' ? (prefersDark ? 'dark' : 'light') : next);
        updateThemeIcon();
      }

      function updateThemeIcon() {
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        elements.themeIcon.innerHTML = isDark
          ? '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="2" fill="none"/>'
          : '<path d="M12 3v2m0 14v2m9-9h-2M5 12H3m14.95 6.95-1.41-1.41M7.46 7.46 6.05 6.05m12.9 0-1.41 1.41M7.46 16.54l-1.41 1.41" stroke="currentColor" stroke-width="2" fill="none"/>';
      }

      // Initialize theme
      applyTheme(localStorage.getItem(THEME_KEY) || 'auto');

      // Toggle theme on button click
      elements.themeBtn.addEventListener('click', () => {
        const current = document.documentElement.getAttribute('data-theme') || (prefersDark ? 'dark' : 'light');
        applyTheme(current === 'dark' ? 'light' : 'dark');
      });
    }

    // ========== EVENT LISTENERS ==========
    function setupEventListeners() {
      // Submit answer
      elements.submitBtn.addEventListener('click', checkAnswer);
      elements.answerInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') checkAnswer();
      });

      // Next item
      elements.nextBtn.addEventListener('click', nextItem);

      // Context panel
      elements.showContextBtn.addEventListener('click', showContextPanel);
      elements.showMnemonicsBtn.addEventListener('click', () => {
        showContextPanel();
        activateTab('mnemonics');
      });
      elements.closeContextBtn.addEventListener('click', hideContextPanel);

      // Tab switching
      elements.panelTabs.forEach(tab => {
        tab.addEventListener('click', () => activateTab(tab.dataset.tab));
      });

      // Controls
      elements.hintBtn.addEventListener('click', () => {
        const item = state.currentItem;
        alert(`Hint: ${item.type === 'radical' ? 'Think about what this shape represents' : 'The reading starts with "${item.reading.charAt(0)}"'}`);
      });

      elements.audioBtn.addEventListener('click', playAudio);

      elements.starBtn.addEventListener('click', () => {
        const isStarred = elements.starBtn.getAttribute('data-starred') === 'true';
        elements.starBtn.setAttribute('data-starred', !isStarred);

        if (!isStarred) {
          elements.starBtn.innerHTML = `
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
              <path d="m12 3 3.09 6.26L22 10.27l-5 4.9 1.18 6.86L12 18.9 5.82 22 7 15.17l-5-4.9 6.91-1.01L12 3Z"/>
            </svg>
          `;
        } else {
          elements.starBtn.innerHTML = `
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m12 3 3.09 6.26L22 10.27l-5 4.9 1.18 6.86L12 18.9 5.82 22 7 15.17l-5-4.9 6.91-1.01L12 3Z"/>
            </svg>
          `;
        }
      });

      // Stroke animation
      document.getElementById('animateStrokesBtn')?.addEventListener('click', () => {
        alert('Stroke animation would play here in the full implementation');
      });

      // Practice writing
      document.getElementById('practiceWritingBtn')?.addEventListener('click', () => {
        alert('Writing practice interface would open here in the full implementation');
      });

      // Keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        // Don't trigger if user is typing in input
        if (e.target === elements.answerInput) return;

        switch(e.key) {
          case 'Enter':
            if (elements.resultContainer.style.display === 'block') {
              nextItem();
            } else {
              checkAnswer();
            }
            break;
          case 'h':
          case 'H':
            elements.hintBtn.click();
            break;
          case 'a':
          case 'A':
            elements.audioBtn.click();
            break;
        }
      });
    }

    // ========== INITIALIZE APP ==========
    document.addEventListener('DOMContentLoaded', () => {
      initTheme();
      init();
    });
  </script>
</body>
</html>