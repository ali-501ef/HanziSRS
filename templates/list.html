<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="{{description}}" />
  <meta name="theme-color" content="#0b0f19" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <title>{{title}}</title>

  <style>
    /* ---------- Reset & tokens ---------- */
    *,*::before,*::after{box-sizing:border-box}
    body,h1,h2,h3,h4,p,figure,blockquote,dl,dd{margin:0}
    img,svg,video,canvas{display:block;max-width:100%}
    input,button,textarea,select{font:inherit}
    :root{color-scheme:dark light}
    :root{
      --bg:#0b0f19; --bg-2:#0e1423; --text:#e5e7eb; --muted:#98a2b3;
      --surface:rgba(255,255,255,.04); --surface-2:rgba(255,255,255,.06); --border:rgba(255,255,255,.12);
      --accent:hsl(257 90% 66%); --accent-2:hsl(190 90% 60%);
      --ok:#22c55e; --warn:#f59e0b;
      --shadow:0 10px 30px rgba(0,0,0,.35), 0 2px 8px rgba(0,0,0,.2);
      --container:1200px; --radius:16px; --gap:18px;
      --navH:64px; --lvlHeadH:52px; --tile:88px; --tileFont:36px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f8fb; --bg-2:#eef2f8; --text:#0b1220; --muted:#667085;
        --surface:#ffffff; --surface-2:#f3f6fb; --border:#d7dee9;
        --shadow:0 10px 30px rgba(11,18,32,.08), 0 2px 8px rgba(11,18,32,.06);
      }
    }
    html[data-theme="light"]{
      --bg:#f6f8fb; --bg-2:#eef2f8; --text:#0b1220; --muted:#667085;
      --surface:#ffffff; --surface-2:#f3f6fb; --border:#d7dee9;
      --shadow:0 10px 30px rgba(11,18,32,.08), 0 2px 8px rgba(11,18,32,.06);
    }
    html[data-theme="dark"]{
      --bg:#0b0f19; --bg-2:#0e1423; --text:#e5e7eb; --muted:#98a2b3;
      --surface:rgba(255,255,255,.04); --surface-2:rgba(255,255,255,.06); --border:rgba(255,255,255,.12);
    }

    body{
      min-height:100vh; background:var(--bg); color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", "PingFang SC","Hiragino Sans GB","Microsoft YaHei","Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility; line-height:1.55;
    }
    .bg{position:fixed; inset:0; z-index:-1; background:
      radial-gradient(1000px 420px at 85% -10%, color-mix(in oklab, var(--accent), transparent 76%), transparent 75%),
      radial-gradient(900px 360px at 0% 0%, color-mix(in oklab, var(--accent-2), transparent 82%), transparent 75%),
      linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 40%, var(--bg) 100%)}
    .bg::after{content:""; position:absolute; inset:-1px; opacity:.25; background:
      linear-gradient(transparent 97%, var(--border) 100%) 0 0/40px 40px,
      linear-gradient(90deg, transparent 97%, var(--border) 100%) 0 0/40px 40px;
      mask-image: radial-gradient(80% 60% at 50% 10%, #000 0%, #000 60%, transparent 85%)}

    .container{max-width:var(--container); margin-inline:auto; padding-inline:clamp(16px,3vw,32px)}
    .row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
    .stack{display:flex; flex-direction:column; gap:10px}

    .nav{position:sticky; top:0; z-index:60; backdrop-filter: blur(12px);
      background: color-mix(in oklab, var(--bg), transparent 55%); border-bottom:1px solid var(--border)}
    .nav-inner{height:var(--navH); display:flex; align-items:center; justify-content:space-between}
    .brand{display:flex; gap:10px; align-items:center; color:inherit; text-decoration:none; font-weight:900}
    .brand-badge{width:32px; height:32px; display:grid; place-items:center; border-radius:10px; color:#fff;
      background:linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow:var(--shadow)}
    .btn{display:inline-flex; align-items:center; gap:10px; border:1px solid var(--border); background:var(--surface);
      padding:10px 14px; border-radius:12px; color:var(--text); text-decoration:none; cursor:pointer; font-weight:800; transition:transform .15s ease}
    .btn:hover{transform:translateY(-1px)} .btn:active{transform:none}

    .panel{background:linear-gradient(180deg, var(--surface-2), transparent); border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow); padding:16px}
    h1{font-size:clamp(1.35rem, 2.2vw, 1.8rem); font-weight:900}
    .muted{color:var(--muted)}
    .pill{padding:6px 10px; border:1px solid var(--border); border-radius:999px}

    .grid{
      display:grid; gap:12px; padding:14px;
      grid-template-columns: repeat(auto-fill, minmax(var(--tile), 1fr));
    }

    .tile{
      position:relative; display:flex; align-items:center; justify-content:center; flex-direction:column;
      min-height:var(--tile); border:1px solid var(--border); border-radius:14px;
      background:var(--surface); color:var(--text);
      cursor:pointer; user-select:none; transition:border-color .15s, transform .10s, background .15s;
      text-decoration:none; padding:8px;
    }
    .tile:hover{transform:translateY(-1px); border-color:color-mix(in oklab, var(--accent), transparent 65%)}
    .glyph{font-size:var(--tileFont); font-weight:900; line-height:1;}
    .tile-label{font-size:12px; color:var(--muted); margin-top:4px; text-align:center;}

    .nav-links{display:flex; gap:12px; margin-top:12px; flex-wrap:wrap;}
    .nav-link{display:inline-flex; align-items:center; gap:6px;}

    footer{border-top:1px solid var(--border); margin-top:26px; padding:22px 0; color:var(--muted)}
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>

  <nav class="nav" aria-label="Primary">
    <div class="container nav-inner">
      <a class="brand" href="/" aria-label="Back to dashboard">
        <span class="brand-badge" aria-hidden="true">汉</span>
        <span>Hanzi SRS</span>
        <span class="pill">Levels</span>
      </a>
      <div class="row">
        <button id="themeBtn" class="btn" aria-label="Toggle theme">
          <svg id="themeIcon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 3v2m0 14v2m9-9h-2M5 12H3m14.95 6.95-1.41-1.41M7.46 7.46 6.05 6.05m12.9 0-1.41 1.41M7.46 16.54l-1.41 1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          Theme
        </button>
      </div>
    </div>
  </nav>

  <main class="container" style="margin-top:18px">
    <section class="panel">
      <div class="row" style="justify-content:space-between; align-items:flex-start">
        <div class="stack">
          <h1>{{title}}</h1>
          <p class="muted">{{description}}</p>
        </div>
      </div>

      <div class="nav-links">
        {{prev_link}}
        {{next_link}}
      </div>
    </section>

    <section class="panel" style="margin-top:16px">
      {{{content_html}}}
    </section>
  </main>

  <footer class="container">
    <div class="row" style="justify-content:space-between">
      <span class="muted">© <span id="year"></span> Hanzi SRS</span>
    </div>
  </footer>

  <script>
    const THEME_KEY='hanziSRS_theme';
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    function applyTheme(next){
      localStorage.setItem(THEME_KEY, next);
      document.documentElement.setAttribute('data-theme', next==='auto' ? (prefersDark?'dark':'light') : next);
      document.getElementById('themeIcon').innerHTML =
        (document.documentElement.getAttribute('data-theme')==='dark')
          ? '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="2" fill="none"/>'
          : '<path d="M12 3v2m0 14v2m9-9h-2M5 12H3m14.95 6.95-1.41-1.41M7.46 7.46 6.05 6.05m12.9 0-1.41 1.41M7.46 16.54l-1.41 1.41" stroke="currentColor" stroke-width="2" fill="none"/>';
    }
    function initTheme(){ applyTheme(localStorage.getItem(THEME_KEY) || 'auto') }
    document.getElementById('themeBtn').addEventListener('click', ()=>{
      const cur = document.documentElement.getAttribute('data-theme') || (prefersDark?'dark':'light');
      applyTheme(cur==='dark' ? 'light' : 'dark');
    });
    document.getElementById('year').textContent = new Date().getFullYear();
    initTheme();
  </script>
</body>
</html>
